<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat-Support - Dr. Smith Medical Clinic</title>
    
    <link rel="shortcut icon" href="https://tierzahnzentrum.com/wp-content/uploads/2024-TierZahnZentrum-icon-rgb.svg#150" type="image/svg+xml">
    <link rel="apple-touch-icon" href="https://tierzahnzentrum.com/wp-content/uploads/2024-TierZahnZentrum-icon-rgb.svg#150">
    <meta name="theme-color" content="#ffffff">

    <style>
        /* Font Import: Plus Jakarta Sans */
        @font-face {
            font-family: 'Plus Jakarta Sans';
            src: url('https://tierzahnzentrum.com/wp-content/uploads/2024/08/PlusJakartaSans-Regular.ttf#139') format('truetype');
            font-weight: 400; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'Plus Jakarta Sans';
            src: url('https://tierzahnzentrum.com/wp-content/uploads/2024/08/PlusJakartaSans-Bold.ttf#142') format('truetype');
            font-weight: 700; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'Plus Jakarta Sans';
            src: url('https://tierzahnzentrum.com/wp-content/uploads/PlusJakartaSans-SemiBold.ttf#805') format('truetype');
            font-weight: 600; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'Plus Jakarta Sans';
            src: url('https://tierzahnzentrum.com/wp-content/uploads/2024/08/PlusJakartaSans-Medium.ttf#141') format('truetype');
            font-weight: 500; font-style: normal; font-display: swap;
        }

        /* CSS Variables for theming */
        :root {
            --primary-color: #0084AC;
            --primary-color-darker: #006A8A; 
            --secondary-color: #E9F6FA; 
            --user-message-bg: #0084AC; 
            --ai-message-bg: #E9F6FA;   
            --text-color: #333333;
            --text-color-light: #ffffff;
            --text-color-secondary: #555555;
            --border-color: #DDE4E8;
            --background-color: #ffffff;
            --content-bg-color: #F2F6FA;
            --font-family: 'Plus Jakarta Sans', Arial, sans-serif;
            --footer-height: auto; 
        }

        /* Basic body and link styling */
        body {
            font-family: var(--font-family);
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: var(--background-color);
            color: var(--text-color);
        }
        a { color: var(--primary-color); text-decoration: none; }
        a:hover { text-decoration: underline; }

        /* Site Header styling */
        .site-header {
            background-color: var(--background-color);
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            height: 80px;
        }

        .header-content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 30px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-container img { 
            height: 45px; 
            width: auto; 
            display: block;
        }

        .main-nav {
            display: flex;
            flex-grow: 1;
            justify-content: center;
        }
        .main-nav .nav {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            align-items: center;
        }
        .main-nav .nav-item {
            margin-left: 15px;
            margin-right: 15px;
            position: relative;
        }
        .main-nav .nav-link {
            color: var(--text-color);
            font-weight: 500;
            font-size: 15px;
            text-decoration: none;
            padding: 5px 0;
        }
        .main-nav .nav-link:hover,
        .main-nav .nav-item.active .nav-link {
            color: var(--primary-color);
        }
        .main-nav .submenu { 
            display: none; 
            position: absolute; 
            top: 100%; 
            left: 0; 
            background-color: var(--background-color); 
            border: 1px solid var(--border-color); 
            box-shadow: 0 3px 5px rgba(0,0,0,0.1); 
            list-style: none; 
            padding: 0; 
            margin: 0; 
            min-width: 200px; 
            z-index: 1001; 
        }
        .main-nav .submenu .nav-item { 
            margin-left: 0; 
            width: 100%; 
        }
        .main-nav .submenu .nav-link { 
            display: block; 
            padding: 10px 15px; 
            font-size: 14px; 
            border-bottom: none; 
        }
        .main-nav .submenu .nav-link:hover { 
            background-color: var(--secondary-color); 
        }
        .main-nav .nav-item.has-dropdown:hover .submenu { 
            display: block; 
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .header-actions .header-icon {
            height: 24px;
            width: 24px;
            display: block;
        }
        .header-actions .contact-phone-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-color);
            font-weight: 500;
        }
        .header-actions .phone-number-text {
            font-size: 14px;
        }
        .header-actions .call-btn.header-call-btn {
            background-color: var(--primary-color);
            color: var(--text-color-light);
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            white-space: nowrap;
        }
        .header-actions .call-btn.header-call-btn:hover {
            background-color: var(--primary-color-darker);
        }
        .contact-email-link .header-icon {
            display: block;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 28px;
            color: var(--text-color);
            cursor: pointer;
            padding: 5px;
        }

        @media (max-width: 992px) {
            .site-header {
                height: 60px;
            }
            .header-content-wrapper {
                padding: 0 15px;
            }
            .main-nav {
                display: none;
                flex-direction: column;
                position: fixed;
                top: 0;
                left: -100%;
                width: 80%;
                max-width: 300px;
                height: 100vh;
                background-color: var(--background-color);
                z-index: 1090;
                padding: 20px;
                padding-top: 70px;
                box-shadow: 2px 0 5px rgba(0,0,0,0.1);
                overflow-y: auto;
                transition: left 0.3s ease-in-out;
            }
            .main-nav.mobile-active {
                display: flex !important;
                left: 0;
            }
            .main-nav .nav {
                flex-direction: column;
                width: 100%;
                align-items: flex-start;
            }
            .main-nav .nav-item {
                margin: 0;
                width: 100%;
            }
            .main-nav .nav-link {
                font-size: 18px;
                padding: 15px 10px;
                display: block;
                border-bottom: 1px solid var(--border-color);
                width: 100%;
                text-align: left;
            }
            .main-nav .nav-item:last-child .nav-link {
                border-bottom: none;
            }
            .main-nav .submenu {
                position: static;
                box-shadow: none;
                border: none;
                border-top: 1px dashed var(--border-color);
                width: auto;
                margin-left: 20px;
                padding-left: 0;
                background-color: transparent;
            }
            .main-nav .submenu .nav-link {
                font-size: 16px;
                padding: 10px;
                border-bottom: none;
            }
            .header-actions .phone-number-text {
                display: none;
            }
            .header-actions .call-btn.header-call-btn {
                display: none;
            }
            .header-actions .header-icon {
                height: 22px;
                width: 22px;
            }
            .header-actions {
                gap: 12px;
            }
            .mobile-menu-toggle {
                display: block !important;
                z-index: 1100;
            }
        }

        /* Hidden Controls Container */
        #hiddenControlsContainer {
            display: none;
            padding: 10px 20px;
            text-align: center;
            background-color: #e0e0e0;
            border-bottom: 1px solid var(--border-color);
        }
        #hiddenControlsContainer label {
            margin-right: 8px;
            font-weight: 500;
        }
        #hiddenControlsContainer select, #hiddenControlsContainer input {
            padding: 5px 8px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            font-family: var(--font-family);
            font-size: 14px;
            margin-right: 15px;
        }

        /* Chat page layout */
.chat-page-wrapper {
    flex-grow: 1;
    background-color: var(--content-bg-color);
    display: flex;
    justify-content: center;   /* centers children horizontally */
    align-items: center;       /* centers children vertically */
    padding: 20px;
    box-sizing: border-box;
    gap: 20px;
}

        .chat-container {
            max-width: 800px;
            flex-grow: 1;
            height: 70vh;
            max-height: 600px;
            min-height: 450px;
            background-color: var(--background-color);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Chat messages area */
        .chat-messages {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message-wrapper {
            display: flex;
            max-width: 85%;
        }
        
        .ai-message-wrapper {
            align-self: flex-start;
            flex-direction: row;
            gap: 10px;
        }

        @keyframes msgFadeSlide {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .message-wrapper.animate-in {
            animation: msgFadeSlide 0.35s ease-out forwards;
        }
        .user-message-wrapper {
            align-self: flex-end;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            object-fit: cover;
            flex-shrink: 0;
        }
        .avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .message-content-wrapper {
            display: flex;
            flex-direction: column;
            max-width: calc(100% - 50px);
        }
        
        .sender-name {
            font-size: 0.85em;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 2px;
        }
        .sender-title {
            font-size: 0.75em;
            color: var(--text-color-secondary);
            margin-bottom: 4px;
        }
        .ai-message-wrapper .sender-name, .ai-message-wrapper .sender-title {
            margin-left: 2px;
        }

        .message {
            padding: 10px 15px;
            border-radius: 18px;
            line-height: 1.6;
            font-size: 15px;
            word-wrap: break-word;
            position: relative;
        }
        .message p { 
            margin: 0 0 3px 0; 
            white-space: pre-wrap; 
        }
        .message .timestamp { 
            font-size: 0.7em; 
            color: #888; 
            display: block; 
            margin-top: 4px; 
        }

        .ai-message {
            background-color: var(--ai-message-bg);
            color: var(--text-color);
            border-bottom-left-radius: 5px;
            align-self: flex-start;
        }
        .ai-message .timestamp { 
            text-align: left; 
        }
        
        .ai-message-wrapper.typing-indicator .message p { 
            font-style: italic; 
            color: var(--text-color-secondary); 
        }
        .ai-message-wrapper.typing-indicator .message { 
            background-color: transparent; 
            box-shadow: none; 
            padding-left: 0; 
        }

        .user-message {
            background-color: var(--user-message-bg);
            color: var(--text-color-light);
            border-bottom-right-radius: 5px;
            align-self: flex-end;
        }
        .user-message .timestamp { 
            text-align: right; 
            color: rgba(255,255,255,0.7); 
        }

        /* Chat input area */
        .chat-input-area { 
            display: flex; 
            padding: 15px 20px; 
            border-top: 1px solid var(--border-color); 
            background-color: #f9f9f9; 
        }
        .chat-input-area textarea {
            flex-grow: 1; 
            padding: 12px 18px; 
            border: 1px solid var(--border-color); 
            border-radius: 22px;
            resize: none; 
            min-height: 24px; 
            max-height: 120px; 
            overflow-y: auto;
            font-family: var(--font-family); 
            font-size: 15px; 
            line-height: 1.5; 
            margin-right: 10px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.06);
        }
        .chat-input-area textarea:focus { 
            outline: none; 
            border-color: var(--primary-color); 
            box-shadow: 0 0 0 2px rgba(0, 132, 172, 0.2); 
        }
        
        .chat-input-area button {
            background-color: var(--primary-color); 
            color: var(--text-color-light); 
            border: none;
            padding: 0 25px; 
            border-radius: 22px; 
            cursor: pointer; 
            font-size: 15px; 
            font-weight: 600;
            transition: background-color 0.2s ease, box-shadow 0.3s ease;
            display: flex; 
            align-items: center; 
            justify-content: center;
        }
        .chat-input-area button:hover { 
            background-color: var(--primary-color-darker); 
        }
        .chat-input-area button:disabled { 
            background-color: #b0bec5; 
            cursor: not-allowed; 
        }
        .chat-input-area button svg { 
            width: 18px; 
            height: 18px; 
            fill: currentColor; 
        }

        /* Subtle Glow Animation for Send Button */
        @keyframes subtleGlow {
            0% { box-shadow: 0 0 4px rgba(0, 132, 172, 0.2); }
            50% { box-shadow: 0 0 12px rgba(0, 132, 172, 0.6); }
            100% { box-shadow: 0 0 4px rgba(0, 132, 172, 0.2); }
        }
        .highlight-send-button {
            animation: subtleGlow 1.5s ease-in-out 2;
        }

        /* Site Footer styling */
        .site-footer {
            padding: 40px 40px 20px 40px;
            background-color: var(--content-bg-color);
            border-top: 1px solid var(--border-color);
            color: var(--text-color-secondary);
            font-size: 14px;
            line-height: 1.7;
        }

        .footer-content {
            max-width: 1100px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 0.9fr 1.2fr 0.9fr;
            gap: 30px;
            align-items: start;
        }

        .footer-column h5, .footer-column h4 {
            font-size: 16px;
            color: var(--text-color);
            font-weight: 600;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .footer-column-1 .footer-clinic-name {
            margin-bottom: 10px;
        }
        .footer-column-1 .footer-address {
            margin-bottom: 20px;
            font-size: 13px;
            line-height: 1.6;
        }
        .footer-column-1 .footer-address a {
            color: var(--text-color-secondary);
        }
        .footer-column-1 .footer-address a:hover {
            color: var(--primary-color);
        }

        .footer-social-icons {
            display: flex;
            gap: 12px;
        }
        .footer-social-icons img {
            width: 28px;
            height: 28px;
            opacity: 0.8;
            transition: opacity 0.2s ease;
        }
        .footer-social-icons a:hover img {
            opacity: 1;
        }

        .footer-column-2 {
            text-align: center;
        }
        .footer-center-logo {
            height: 45px;
            width: auto;
            margin: 0 auto 15px auto;
            display: block;
        }
        .footer-column-2 .footer-question {
            font-size: 15px;
            font-weight: 500;
            color: var(--text-color);
            margin-bottom: 8px;
        }
        .footer-contact-email {
            margin-bottom: 20px;
        }
        .footer-contact-email a {
            font-size: 1.4em;
            font-weight: 600;
            color: var(--primary-color);
            word-break: break-all;
        }
        .footer-contact-email a:hover {
            text-decoration: underline;
        }

        .footer-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        .btn.footer-btn {
            padding: 10px 25px;
            font-size: 14px;
            font-weight: 500;
            border-radius: 5px;
            text-decoration: none;
            transition: all 0.3s ease;
            min-width: 140px;
            box-sizing: border-box;
        }
        .btn-primary.footer-btn {
            background-color: var(--primary-color);
            color: var(--text-color-light);
            border: 1px solid var(--primary-color);
        }
        .btn-primary.footer-btn:hover {
            background-color: var(--primary-color-darker);
            border-color: var(--primary-color-darker);
        }
        .btn-outline.footer-btn {
            background-color: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }
        .btn-outline.footer-btn:hover {
            background-color: var(--primary-color);
            color: var(--text-color-light);
        }

        .footer-column-3 {
        }
        .footer-links-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .footer-links-list li {
            margin-bottom: 8px;
        }
        .footer-links-list a {
            color: var(--text-color-secondary);
            font-size: 14px;
        }
        .footer-links-list a:hover {
            color: var(--primary-color);
        }

        .footer-copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid var(--border-color);
            font-size: 13px;
            color: var(--text-color-secondary);
        }

        @media (max-width: 768px) {
            .site-footer {
                padding: 30px 20px 20px 20px;
            }
            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
                text-align: center;
            }
            .footer-column-1 .footer-address,
            .footer-column-1 .footer-clinic-name {
                text-align: center;
            }
            .footer-social-icons {
                justify-content: center;
                margin-top: 15px;
                margin-bottom: 15px;
            }
            .footer-center-logo {
                margin-top: 0;
                margin-bottom: 10px;
                height: 40px;
            }
            .footer-contact-email a {
                font-size: 1.2em;
            }
            .footer-buttons {
                flex-direction: column;
                align-items: center;
                gap: 12px;
            }
            .btn.footer-btn {
                width: 100%;
                max-width: 280px;
            }
            .footer-column-3 {
                display: none;
            }
            .footer-column-2 { 
                order: -1; 
            }
            .chat-container {
                min-height: 300px;
                border-radius: 8px;
                height: calc(100vh - 60px - 40px);
            }
            .message-wrapper { 
                max-width: 95%; 
            }
            .message { 
                font-size: 14px; 
            }
            .avatar { 
                width: 35px; 
                height: 35px; 
                font-size: 24px; 
            }
            .message-content-wrapper { 
                max-width: calc(100% - 45px); 
            }
            .sender-name { 
                font-size: 0.8em; 
            }
            .sender-title {
                font-size: 0.7em;
            }
            .chat-input-area textarea { 
                padding: 10px 15px; 
                font-size: 14px; 
            }
            .chat-input-area button { 
                padding: 0 20px; 
                font-size: 14px; 
            }
            .end-scenario-modal { 
                width: 80%; 
                padding: 20px;
            }
            .end-scenario-modal p { 
                font-size: 16px;
            }
        }

        /* Profile card shown before chat starts */
        .persona-profile-card {
            text-align: center;
            padding: 32px 24px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .persona-profile-card .profile-heading {
            font-weight: 600;
            color: var(--primary-color);
            margin: 0 0 12px;
            font-size: 1.1rem;
        }
        .persona-profile-card .profile-photo {
            width: 96px;
            height: 96px;
            margin: 0 auto 12px;
            border-radius: 50%;
            overflow: hidden;
        }
        .persona-profile-card .profile-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .persona-profile-card .profile-emoji {
            font-size: 72px;
            line-height: 1;
        }
        .persona-profile-card .profile-name {
            margin: 0;
            font-size: 1.25rem;
        }
        .persona-profile-card .profile-title {
            margin: 4px 0 0;
            font-size: .9rem;
            color: var(--text-color-secondary);
        }

        /* End Scenario Modal */
        .end-scenario-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background-color: rgba(0, 0, 0, 0.5); 
            display: none; 
            justify-content: center; 
            align-items: center; 
            z-index: 2000; 
        }
        .end-scenario-modal { 
            background-color: white; 
            padding: 30px 40px; 
            border-radius: 8px; 
            box-shadow: 0 5px 20px rgba(0,0,0,0.2); 
            text-align: center; 
        }
        .end-scenario-modal p { 
            font-size: 18px; 
            color: var(--text-color); 
            margin-bottom: 20px; 
        }
        .end-scenario-modal button { 
            background-color: var(--primary-color); 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px; 
            font-weight: 500; 
        }
        .end-scenario-modal button:hover { 
            background-color: var(--primary-color-darker); 
        }
    </style>
</head>
<body>

    <header class="site-header">
        <div class="header-content-wrapper">
            <div class="logo-container">
                <p>Dr. Smith<span class="logo-highlight"> Medical Clinic</span></p>
            </div>
            <nav class="main-nav" id="mainNav">
                <ul class="nav">
                    <li class="nav-item">Our Team</a></li>
                    <li class="nav-item">Services</a></li>
                    <li class="nav-item">Contact</a></li>
                    <li class="nav-item">Emergency</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <a href="tel:+1 123 456 7890" class="contact-phone-link">
                    <img src="https://tierzahnzentrum.com/wp-content/uploads/telefon-kontakt-icon.svg" alt="Phone Icon" class="header-icon" onerror="this.onerror=null;this.src='https://placehold.co/24x24/eeeeee/999999?text=P';">
                    <span class="phone-number-text">+1 123 456 7890</span>
                </a>
                <a href="tel:+1 123 456 7890" class="btn call-btn header-call-btn">Call now</a>
                <a href="mailto:info@drsmithclinic.com" class="contact-email-link" title="Email us">
                    <img src="https://tierzahnzentrum.com/wp-content/uploads/e-mail-kontakt-icon.svg" alt="Email Icon" class="header-icon" onerror="this.onerror=null;this.src='https://placehold.co/24x24/eeeeee/999999?text=E';">
                </a>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Open Menu">☰</button>
        </div>
    </header>

    <div id="hiddenControlsContainer">
        <label for="personaToggleInternal">Antworten als (intern):</label>
        <select id="personaToggleInternal">
            <option value="bot" selected>VetBot</option>
            <option value="human">Lena Bauer</option>
        </select>
    </div>

    <div class="chat-page-wrapper">
        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <div id="profileCardMount"></div>
            </div>
            <div class="chat-input-area">
                <textarea id="userInput" placeholder="Your answer will appear here" rows="1" disabled></textarea>
                <button id="sendButton" title="Send" disabled>
                    <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
                </button>
            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-column footer-column-1">
                <h5 class="footer-clinic-name">Dr. Smith Medical Clinic</h5>
                <p class="footer-address">
                    123 Main Street<br>
                    Springfield, IL 62701<br>
                    Tel: <a href="tel:+11234567890">+1 123 456 7890</a><br>
                    Email: <a href="mailto:info@drsmithclinic.com">info@drsmithclinic.com</a>
                </p>
                <div class="footer-social-icons">
                    <a href="https://www.facebook.com/drsmithclinic" target="_blank" title="Facebook">
                        <img src="https://placehold.co/28x28/777777/FFFFFF?text=F" alt="Facebook">
                    </a>
                    <a href="https://www.instagram.com/drsmithclinic" target="_blank" title="Instagram">
                        <img src="https://placehold.co/28x28/777777/FFFFFF?text=I" alt="Instagram">
                    </a>
                    <a href="https://www.linkedin.com/company/drsmithclinic" target="_blank" title="LinkedIn">
                        <img src="https://placehold.co/28x28/777777/FFFFFF?text=Li" alt="LinkedIn">
                    </a>
                </div>
            </div>
            <div class="footer-column footer-column-2">
                <h4 class="footer-question">Have any questions?</h4>
                <p class="footer-contact-email">
                    <a href="mailto:info@drsmithclinic.com">info@drsmithclinic.com</a>
                </p>
                <div class="footer-buttons">
                    <a href="mailto:info@drsmithclinic.com" class="btn btn-primary footer-btn">Email Us</a>
                    <a href="tel:+11234567890" class="btn btn-outline footer-btn">Call Now</a>
                </div>
            </div>
            <div class="footer-column footer-column-3">
                <h5 class="footer-links-title">Quick Links</h5>
                <ul class="footer-links-list">
                    <li><a href="/about-us/">About Us</a></li>
                    <li><a href="/services/">Services</a></li>
                    <li><a href="/patient-info/">Patient Info</a></li>
                    <li><a href="/contact/">Contact</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-copyright">
            © 2025 Dr. Smith Medical Clinic. All rights reserved.
        </div>
    </footer>

    <div class="end-scenario-overlay" id="endScenarioOverlay">
        <div class="end-scenario-modal">
            <p>The consultation has ended. You can now return or close this window.</p>
            <button id="closeModalButton">Close</button>
        </div>
    </div>

    <script>
        // DOM Elements
        const chatMessagesEl = document.getElementById('chatMessages');
        const userInputEl = document.getElementById('userInput');
        const sendButtonEl = document.getElementById('sendButton');
        const endScenarioOverlayEl = document.getElementById('endScenarioOverlay');
        const closeModalButtonEl = document.getElementById('closeModalButton');
        const mobileMenuToggleEl = document.getElementById('mobileMenuToggle');
        const mainNavEl = document.getElementById('mainNav');
        const personaToggleInternalEl = document.getElementById('personaToggleInternal');

        // Persona Configuration
        const personaConfig = {
            bot: {
                name: "Zähnchen Bot",
                title: "AI Dental Assistant | Dr. Smith Medical Clinic",
                avatarType: "emoji",
                avatarValue: "🤖"
            },
            human: {
                name: "Virtual Assistant",
                title: "Virtual Assistant | Dr. Smith Medical Clinic",
                avatarType: "emoji",
                avatarValue: ""
            }
        };

        let currentAiPersonaKey = 'human';
        let currentScenarioIndex = 0;
        let autoSendTimer = null;
        let firstUserInputActivated = false;

        const chatScenario = [
            {
                type: 'CB',
                text: "Welcome to Dr. Smith Medical Clinic! I am the practice's virtual assistant and will be happy to help you.\nBefore we start, please indicate your name and telephonenumber in case the practice needs to contact you."
            },
            {
                type: 'PO_INPUT',
                expectedText: "Hi, my name is Alex and you can reach me on +12 345678910."
            },
            {
                type: 'CB',
                text: "Thank you. What can I do for you?"
            },
            {
                type: 'PO_INPUT',
                expectedText: "I would like to have a medical assessment."
            },
            {
                type: 'CB',
                text: "All right. What symptoms do you have?"
            },
            {
                type: 'PO_INPUT',
                expectedText: "I have pain in my hip."
            },
            {
                type: 'CB',
                text: "Okay. Now let us talk in more detail about your symptoms.\nHow long have you had hip pain?"
            },
            {
                type: 'PO_INPUT',
                expectedText: "The pain has been present for about a week."
            },
            {
                type: 'CB',
                text: "All right. Where exactly does the hip pain occur?"
            },
            {
                type: 'PO_INPUT',
                expectedText: "The pain occurs mainly on the left side of my hip."
            },
            {
                type: 'CB',
                text: "Okay. Is the pain permanently noticeable or does it only occur with certain movements, for example when walking or sitting?"
            },
            {
                type: 'PO_INPUT',
                expectedText: "The pain intensifies when I move and turn."
            },
            {
                type: 'CB',
                text: "I see. Have you recently exercised in an unusual way, e.g. through a new sport or a particularly intensive sports session?"
            },
            {
                type: 'PO_INPUT',
                expectedText: "I can not remember anything unusual that has happened. I have been starting to run a little more intensively some time ago."
            },
            {
                type: 'CB',
                text: "Okay. Have you noticed any redness or swelling around the hip?"
            },
            {
                type: 'PO_INPUT',
                expectedText: "No. There is absolutely nothing visible."
            },
            {
                type: 'CB',
                text: "Thank you very much. I now have enough information for an initial assessment."
            },
            {
                type: 'LONG_CB',
                text: "I have successfully completed the medical assessment for you.\nYou probably have a mechanical overload of the hip joint. This is not unusual with sporting activities such as jogging and is easily treatable. Your symptoms should subside on their own over the next few hours to days.\nThe practice will contact you tomorrow on the telephone number you provided in the beginning of our chat to check the progress of your symptoms and discuss the next steps with you."
            },
            {
                type: 'PO_INPUT',
                expectedText: "What can I do to reduce the pain?"
            },
            {
                type: 'LONG_CB',
                text: "To reduce the pain and speed up the healing process, I recommend targeted stretching exercise for the hip muscles and localised cold applications."
            },
            {
                type: 'PO_INPUT',
                expectedText: "Which stretching exercise would help me?"
            },
            {
                type: 'LONG_CB',
                text: "Sit with legs straight, lean forward from the hips with a straight back, reach toward your feet, and hold the gentle stretch in your hips for 20–30 seconds."
            },
            {
                type: 'PO_INPUT',
                expectedText: "Okay, I got it."
            },
            {
                type: 'CB',
                text: "Do you have any other questions? If not feel free to close the chat."
            },
            {
                type: 'PO_INPUT',
                expectedText: "No, I finish now."
            },
            {
                type: 'END_SCENARIO'
            }
        ];

        function getCurrentTimestamp() {
            return new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
        }

        function showPersonaProfileCard() {
            const persona = personaConfig[currentAiPersonaKey];
            const card = document.createElement('div');
            card.classList.add('persona-profile-card');
            card.innerHTML = `
                <p class="profile-heading">
                    ${currentAiPersonaKey === 'human' ? '' : 'You are chatting with our AI assistant:'}
                </p>
                <div class="profile-photo">
                    ${persona.avatarType === 'image'
                        ? `<img src="${persona.avatarValue}" alt="${persona.name}" onerror="this.onerror=null;this.src='https://placehold.co/96x96/eeeeee/999999?text=Avatar';">`
                        : `<span class="profile-emoji">${persona.avatarValue}</span>`}
                </div>
                <h3 class="profile-name">${persona.name}</h3>
                <p class="profile-title">${persona.title}</p>
            `;
            (document.getElementById('profileCardMount') || chatMessagesEl).appendChild(card);
        }

        function addMessageToChat(text, senderType) {
            const outerWrapper = document.createElement('div');
            outerWrapper.classList.add('message-wrapper');

            if (senderType === 'ai') {
                outerWrapper.classList.add('ai-message-wrapper');
                const persona = personaConfig[currentAiPersonaKey];
                const avatarDiv = document.createElement('div');
                avatarDiv.classList.add('avatar');
                if (persona.avatarType === 'image') {
                    const avatarImg = document.createElement('img');
                    avatarImg.src = persona.avatarValue;
                    avatarImg.alt = persona.name + " avatar";
                    avatarImg.onerror = function() { 
                        this.onerror = null; 
                        this.src = 'https://placehold.co/40x40/eeeeee/999999?text=Ava'; 
                    };
                    avatarDiv.appendChild(avatarImg);
                } else {
                    avatarDiv.textContent = persona.avatarValue;
                }
                outerWrapper.appendChild(avatarDiv);

                const messageContentWrapper = document.createElement('div');
                messageContentWrapper.classList.add('message-content-wrapper');

                const nameDiv = document.createElement('div');
                nameDiv.classList.add('sender-name');
                nameDiv.textContent = persona.name;
                messageContentWrapper.appendChild(nameDiv);

                if (persona.title) {
                    const titleDiv = document.createElement('div');
                    titleDiv.classList.add('sender-title');
                    titleDiv.textContent = persona.title;
                    messageContentWrapper.appendChild(titleDiv);
                }

                const messageBubbleDiv = document.createElement('div');
                messageBubbleDiv.classList.add('message', 'ai-message');
                const textParagraph = document.createElement('p');
                textParagraph.textContent = text;
                messageBubbleDiv.appendChild(textParagraph);
                messageContentWrapper.appendChild(messageBubbleDiv);
                outerWrapper.appendChild(messageContentWrapper);
            } else {
                outerWrapper.classList.add('user-message-wrapper');
                const messageBubbleDiv = document.createElement('div');
                messageBubbleDiv.classList.add('message', 'user-message');
                const textParagraph = document.createElement('p');
                textParagraph.textContent = text;
                messageBubbleDiv.appendChild(textParagraph);
                outerWrapper.appendChild(messageBubbleDiv);
            }

            const bubbleForTimestamp = outerWrapper.querySelector('.message');
            if (bubbleForTimestamp) {
                const timestampSpan = document.createElement('span');
                timestampSpan.classList.add('timestamp');
                timestampSpan.textContent = getCurrentTimestamp();
                bubbleForTimestamp.appendChild(timestampSpan);
            }

            chatMessagesEl.appendChild(outerWrapper);
            outerWrapper.classList.add('animate-in');
            chatMessagesEl.scrollTo({ top: chatMessagesEl.scrollHeight, behavior: 'smooth' });
        }

        function showTypingIndicator() {
            const persona = personaConfig[currentAiPersonaKey];
            const outerWrapper = document.createElement('div');
            outerWrapper.classList.add('message-wrapper', 'ai-message-wrapper', 'typing-indicator');

            const avatarDiv = document.createElement('div');
            avatarDiv.classList.add('avatar');
            if (persona.avatarType === 'image') {
                const avatarImg = document.createElement('img');
                avatarImg.src = persona.avatarValue;
                avatarImg.alt = persona.name + " avatar";
                avatarImg.onerror = function() { 
                    this.onerror = null; 
                    this.src = 'https://placehold.co/40x40/eeeeee/999999?text=Ava'; 
                };
                avatarDiv.appendChild(avatarImg);
            } else {
                avatarDiv.textContent = persona.avatarValue;
            }
            outerWrapper.appendChild(avatarDiv);

            const messageContentWrapper = document.createElement('div');
            messageContentWrapper.classList.add('message-content-wrapper');

            const nameDiv = document.createElement('div');
            nameDiv.classList.add('sender-name');
            nameDiv.textContent = persona.name;
            messageContentWrapper.appendChild(nameDiv);

            if (persona.title) {
                const titleDiv = document.createElement('div');
                titleDiv.classList.add('sender-title');
                titleDiv.textContent = persona.title;
                messageContentWrapper.appendChild(titleDiv);
            }

            const messageBubbleDiv = document.createElement('div');
            messageBubbleDiv.classList.add('message', 'ai-message');
            messageBubbleDiv.innerHTML = `<p>${persona.name} is typing...</p>`;
            messageContentWrapper.appendChild(messageBubbleDiv);
            outerWrapper.appendChild(messageContentWrapper);

            chatMessagesEl.appendChild(outerWrapper);
            chatMessagesEl.scrollTop = chatMessagesEl.scrollHeight;
            return outerWrapper;
        }

        function handleNextScenarioStep() {
            if (currentScenarioIndex >= chatScenario.length) return;

            const step = chatScenario[currentScenarioIndex];
            userInputEl.disabled = true;
            sendButtonEl.disabled = true;
            clearTimeout(autoSendTimer);

            if (step.type === 'LONG_CB' || step.type === 'CB') {
                const typingIndicator = showTypingIndicator();
                const delay = step.type === 'LONG_CB' ? 5000 : 2000; // 5s for LONG_CB, 2s for CB
                setTimeout(() => {
                    if (typingIndicator && typingIndicator.parentNode) {
                        chatMessagesEl.removeChild(typingIndicator);
                    }
                    addMessageToChat(step.text, 'ai');
                    currentScenarioIndex++;
                    if (currentScenarioIndex < chatScenario.length && chatScenario[currentScenarioIndex].type === 'PO_INPUT') {
                        userInputEl.disabled = true;
                        sendButtonEl.disabled = true;

                        const userSimulatedInput = chatScenario[currentScenarioIndex].expectedText;
                        const wordCount = step.text.split(/\s+/).length;
                        const readingDelay = 1000 + (wordCount * 200); // Base 1s + 200ms per word

                        setTimeout(() => {
                            userInputEl.disabled = false;
                            userInputEl.focus();
                            let i = 0;
                            const typingSpeed = 50;
                            function typeUserInput() {
                                if (i < userSimulatedInput.length) {
                                    userInputEl.value += userSimulatedInput.charAt(i);
                                    userInputEl.style.height = 'auto';
                                    userInputEl.style.height = (userInputEl.scrollHeight) + 'px';
                                    i++;
                                    setTimeout(typeUserInput, typingSpeed);
                                } else {
                                    if (!firstUserInputActivated) {
                                        sendButtonEl.classList.add('highlight-send-button');
                                        firstUserInputActivated = true;
                                        setTimeout(() => {
                                            sendButtonEl.classList.remove('highlight-send-button');
                                        }, 3500);
                                    }
                                    sendButtonEl.disabled = false;
                                    autoSendTimer = setTimeout(() => {
                                        if (!sendButtonEl.disabled) {
                                            handleSendMessage();
                                        }
                                    }, 60000);
                                }
                            }
                            typeUserInput();
                        }, readingDelay);
                    } else if (currentScenarioIndex < chatScenario.length && chatScenario[currentScenarioIndex].type !== 'END_SCENARIO') {
                        handleNextScenarioStep();
                    } else if (currentScenarioIndex < chatScenario.length && chatScenario[currentScenarioIndex].type === 'END_SCENARIO') {
                        handleNextScenarioStep();
                    }
                }, delay);
            } else if (step.type === 'END_SCENARIO') {
                userInputEl.placeholder = "Consultation ended.";
                setTimeout(() => {
                    endScenarioOverlayEl.style.display = 'flex';
                }, 1000);
            }
        }

        function handleSendMessage() {
            const messageText = userInputEl.value.trim();
            if (!messageText) return;

            if (currentScenarioIndex < chatScenario.length && chatScenario[currentScenarioIndex].type === 'PO_INPUT') {
                clearTimeout(autoSendTimer);
                addMessageToChat(messageText, 'user');
                userInputEl.value = '';
                userInputEl.style.height = 'auto';
                sendButtonEl.disabled = true;
                userInputEl.disabled = true;
                sendButtonEl.classList.remove('highlight-send-button');
                currentScenarioIndex++;
                handleNextScenarioStep();
            }
        }

        userInputEl.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
            const canEnableSend = this.value.trim() && currentScenarioIndex < chatScenario.length && chatScenario[currentScenarioIndex].type === 'PO_INPUT';
            sendButtonEl.disabled = !canEnableSend;

            if (canEnableSend && !firstUserInputActivated && sendButtonEl) {
                sendButtonEl.classList.add('highlight-send-button');
                firstUserInputActivated = true;
                setTimeout(() => {
                    sendButtonEl.classList.remove('highlight-send-button');
                }, 3500);
            }
        });

        sendButtonEl.addEventListener('click', handleSendMessage);
        userInputEl.addEventListener('keypress', (event) => {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                if (!sendButtonEl.disabled) {
                    handleSendMessage();
                }
            }
        });

        closeModalButtonEl.addEventListener('click', () => {
            endScenarioOverlayEl.style.display = 'none';
        });

        if (mobileMenuToggleEl && mainNavEl) {
            mobileMenuToggleEl.addEventListener('click', () => {
                const isActive = mainNavEl.classList.toggle('mobile-active');
                mobileMenuToggleEl.classList.toggle('active', isActive);
                mobileMenuToggleEl.innerHTML = isActive ? '✕' : '☰';
                document.body.style.overflow = isActive ? 'hidden' : '';
                if (isActive) {
                    mainNavEl.querySelectorAll('.nav-link').forEach(link => {
                        link.addEventListener('click', () => {
                            mainNavEl.classList.remove('mobile-active');
                            mobileMenuToggleEl.classList.remove('active');
                            mobileMenuToggleEl.innerHTML = '☰';
                            document.body.style.overflow = '';
                        }, { once: true });
                    });
                }
            });
        }

        personaToggleInternalEl.addEventListener('change', (event) => {
            currentAiPersonaKey = event.target.value;
        });

        function initializeDefaultSettings() {
            if (personaToggleInternalEl) {
                personaToggleInternalEl.value = currentAiPersonaKey;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            initializeDefaultSettings();
            showPersonaProfileCard();
            handleNextScenarioStep();
        });
    </script>
</body>
</html>